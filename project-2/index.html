<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flow Specimen</title>
    <link rel="stylesheet" href="styles.css">
</head>

<body onscroll="setAxes()">
    <div class="container">
        <div class="container-content">
            <video class="background" autoplay muted loop>
                <source src="./waterfall/water 2.mp4" type="video/mp4">
            </video>
            <audio id="background-sound" class="background-sound" autoplay loop>
                <source src="./waterfall/waterfall-sound.mp3" type="audio/mpeg">
            </audio>

            <p class="flow-scroll" contenteditable="plaintext-only">Go with<br>the <br>Flow</p>
        </div>
    </div>

    <div class="flexbox-container">
        <p class="flow-slider" id="my-element" contenteditable="plaintext-only">
            Flow <br> Just as the rain creates ripples in the water, this font imitates the movement of the waves
            found in puddles. <br> Type here to test!
        </p>

        <!-- Sliders -->
        <div class="sliders-container">
            <h2>Vapor Specimen Tester</h2>

            <!-- Vapor Slider -->
            <div id="sliders">
                <label class="range-name">Vapor</label>
                <input type="range" class="axis-range slider" id="vapr-slider" min="7" max="5000" value="0"
                    oninput="changeVapr(this.value)">
                <span class="min">Sen</span>
            </div>

            <!-- Font Size Slider -->
            <div id="font-size-slider">
                <label class="range-name">Font Size</label>
                <input type="range" class="axis-range slider" id="font-size-slider-input" min="50" max="200"
                    value="100" oninput="changeFontSize(this.value)">
            </div>

            <!-- Letter Spacing Slider -->
            <div id="letter-spacing-slider">
                <label class="range-name">Letter Spacing</label>
                <input type="range" class="axis-range slider" id="letter-spacing-slider-input" min="-10" max="20"
                    value="0" oninput="changeLetterSpacing(this.value)">
            </div>
        </div>

        <!-- Download Button -->
        <a href="/LIVE Type/fonts/FlowVF.ttf" download="FlowVF.ttf" id="download-button">ðŸ¦†</a>
    </div>

    <div class="content">
        <div class="flex-wrapper">
            <h2>Specimen Information</h2>
            <div class="grid-container">
                <div class="grid-item">A</div>
                <div class="grid-item">B</div>
                <div class="grid-item">C</div>
                <div class="grid-item">D</div>
                <div class="grid-item">E</div>
                <div class="grid-item">F</div>
                <div class="grid-item">G</div>
                <div class="grid-item">H</div>
                <div class="grid-item">I</div>
                <div class="grid-item">J</div>
                <div class="grid-item">Flow is a varaible typeface that mimics the ripples of a puddle. The font
                    references the open source typeface Arima-Sen. Its movements reflect the ever changing patterns in
                    water and its surface tension, being the surface of a liquid that allows it to resist an external
                    force, due to the cohesive nature of its molecules. </div>
                <div class="grid-item">K</div>
                <div class="grid-item">L</div>
                <div class="grid-item">M</div>
                <div class="grid-item">N</div>
                <div class="grid-item">O</div>
                <div class="grid-item">P</div>
                <div class="grid-item">Q</div>
                <div class="grid-item">R</div>
                <div class="grid-item">S</div>
                <div class="grid-item">T</div>
                <div class="grid-item">U</div>
                <div class="grid-item">V</div>
                <div class="grid-item">W</div>
                <div class="grid-item">X</div>
                <div class="grid-item">Y</div>
                <div class="grid-item">Z</div>
                <div class="grid-item">0</div>
                <div class="grid-item">1</div>
                <div class="grid-item">2</div>
                <div class="grid-item">3</div>
                <div class="grid-item">4</div>
                <div class="grid-item">5</div>
                <div class="grid-item">6</div>
                <div class="grid-item">7</div>
                <div class="grid-item">8</div>
                <div class="grid-item">9</div>
                <div class="grid-item">.</div>
                <div class="grid-item">,</div>
                <div class="grid-item">-</div>



            </div>
        </div>
        <br>
        <br>
        <br>
        <br>
    </div>
    <div class="tabs-container">
        <div class="tab-container">
            <div id="tab1" class="tab-content" style="display: block;">
                <p>Phase 1: Be like water, staying grounded yet fluid. <br> ~Flow~</p>
            </div>
            <div id="tab2" class="tab-content" style="display: none;">
                <p>Content for Tab 2: Embrace change, be adaptable. <br> ~Vapor~</p>
            </div>
            <div id="tab3" class="tab-content" style="display: none;">
                <p>Phase 3: Find calm amidst the motion. <br> ~Sen~</p>
            </div>
            <div id="tab4" class="tab-content" style="display: none;">
            </div>
            <div class="box-section">
                <p class="box-text my-element">a</p>
                <div class="box-container-empty">
                    <div class="box-container">
                        <button onmouseenter="swapLetter('a')">a</button>
                        <button onmouseenter="swapLetter('b')">b</button>
                        <button onmouseenter="swapLetter('c')">c</button>
                        <button onmouseenter="swapLetter('d')">d</button>
                        <button onmouseenter="swapLetter('e')">e</button>
                        <button onmouseenter="swapLetter('f')">f</button>
                        <button onmouseenter="swapLetter('g')">g</button>
                        <button onmouseenter="swapLetter('h')">h</button>
                        <button onmouseenter="swapLetter('i')">i</button><br>
                        <button onmouseenter="swapLetter('j')">j</button>
                        <button onmouseenter="swapLetter('k')">k</button>
                        <button onmouseenter="swapLetter('l')">l</button>
                        <button onmouseenter="swapLetter('m')">m</button>
                        <button onmouseenter="swapLetter('n')">n</button>
                        <button onmouseenter="swapLetter('o')">o</button>
                        <button onmouseenter="swapLetter('p')">p</button>
                        <button onmouseenter="swapLetter('q')">q</button>
                        <button onmouseenter="swapLetter('r')">r</button><br>
                        <button onmouseenter="swapLetter('s')">s</button>
                        <button onmouseenter="swapLetter('t')">t</button>
                        <button onmouseenter="swapLetter('u')">u</button>
                        <button onmouseenter="swapLetter('v')">v</button>
                        <button onmouseenter="swapLetter('w')">w</button>
                        <button onmouseenter="swapLetter('x')">x</button>
                        <button onmouseenter="swapLetter('y')">y</button>
                        <button onmouseenter="swapLetter('z')">z</button>
                        <button onmouseenter="swapLetter('0')">0</button>
                        <button onmouseenter="swapLetter('1')">1</button>
                        <button onmouseenter="swapLetter('2')">2</button>
                        <button onmouseenter="swapLetter('3')">3</button>
                        <button onmouseenter="swapLetter('4')">4</button>
                        <button onmouseenter="swapLetter('5')">5</button>
                        <button onmouseenter="swapLetter('6')">6</button>
                        <button onmouseenter="swapLetter('7')">7</button>
                        <button onmouseenter="swapLetter('8')">8</button>
                        <button onmouseenter="swapLetter('9')">9</button>
                    </div>
                </div>
            </div>
            <div class="tab-buttons">
                <button class="tab-button active" onclick="showTab('tab1')">Rain</button>
                <button class="tab-button" onclick="showTab('tab2')">Flow</button>
                <button class="tab-button" onclick="showTab('tab3')">Night</button>
                <button class="tab-button" onclick="showTab('tab4')"></button>

            </div>
        </div>
    </div>


    <h3>~Flow Typeface reference the open source font Arimaâ€“Sen~</h3>

    <!-- *************  References Chat GPT for math - javascript ***************** -->
    <script>
        const root = document.documentElement;
        const container = document.querySelector('.container');
        const flowTextScroll = document.querySelector('.flow-scroll');

        function setAxes() {
            const scrollTop = container.offsetTop;
            const scrollHeight = container.offsetHeight;
            const scrollPosition = window.scrollY;
            const pixelsScrolled = scrollPosition - scrollTop;
            const percentScrolled = pixelsScrolled / (scrollHeight - window.innerHeight);
            const clampedPercentScrolled = Math.max(0, Math.min(percentScrolled, 1));
            const flow = 5000 - Math.round(clampedPercentScrolled * 5000);
            root.style.setProperty('--flow', flow);

            flowTextScroll.style.opacity = clampedPercentScrolled;
        }

        function showTab(tabId) {
            document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');
            document.querySelector(`[onclick="showTab('${tabId}')"]`).classList.add('active');
            document.getElementById(tabId).style.display = 'block';
        }

        function changeVapr(value) {
            const myElement = document.querySelector("#my-element");
            myElement.style.fontVariationSettings = `"VAPR" ${value}`;
        }

        function changeFontSize(value) {
            const myElement = document.querySelector("#my-element");
            myElement.style.fontSize = `${value}px`;
        }

        function changeLetterSpacing(value) {
            const myElement = document.querySelector("#my-element");
            myElement.style.letterSpacing = `${value}px`;
        }

    </script>

    <!-- Tab rain puddle and dark effect -->
    <script>
        let puddleInterval;
        let rainInterval;

        function startRain() {
            const rainContainer = document.createElement("div");
            rainContainer.id = "rain-container";
            rainContainer.classList.add("rain-container");
            document.body.appendChild(rainContainer);

            // Create rain drops at intervals
            rainInterval = setInterval(() => {
                const rainDrop = document.createElement("div");
                rainDrop.classList.add("rain-drop");

                // Set random position and animation speed for the rain drop
                const left = Math.random() * window.innerWidth;
                rainDrop.style.left = `${left}px`;

                rainContainer.appendChild(rainDrop);

                // Remove the rain drop after it reaches the bottom
                rainDrop.addEventListener("animationend", () => {
                    rainDrop.remove();
                });
            }, 30); // Adjust interval for more or fewer rain drops
        }

        function stopRain() {
            // Stop generating new rain drops
            if (rainInterval) {
                clearInterval(rainInterval);
                rainInterval = null;
            }

            // Remove the rain container and drops
            const container = document.getElementById("rain-container");
            if (container) {
                container.remove();
            }
        }

        function startPuddles() {
            // Clear any existing puddles before starting a new one
            stopPuddles();

            // Create a container for puddles
            const container = document.createElement("div");
            container.id = "puddle-container";
            container.classList.add("puddle-container");
            document.body.appendChild(container);

            // Generate puddles at intervals
            puddleInterval = setInterval(() => {
                const puddle = document.createElement("div");
                puddle.classList.add("puddle");

                // Set random position, size, and color for the puddle
                const size = Math.random() * 50 + 30; // Random size between 30px and 80px
                const left = Math.random() * window.innerWidth;
                const top = Math.random() * window.innerHeight;
                const opacity = Math.random() * 0.5 + 0.3; // Random opacity between 0.3 and 0.8
                const color = `rgba(${Math.random() * 100 + 100}, ${Math.random() * 100 + 100}, 255, ${opacity})`; // Light blue shades

                puddle.style.width = `${size}px`;
                puddle.style.height = `${size / 2}px`; // Make it oval
                puddle.style.left = `${left}px`;
                puddle.style.top = `${top}px`;
                puddle.style.backgroundColor = color;

                container.appendChild(puddle);

                // Remove the puddle after the animation ends
                puddle.addEventListener("animationend", () => {
                    puddle.remove();
                });
            }, 500); // Adjust interval for more or fewer puddles
        }

        function stopPuddles() {
            // Stop generating new puddles
            if (puddleInterval) {
                clearInterval(puddleInterval);
                puddleInterval = null;
            }

            // Remove existing puddle container and puddles
            const container = document.getElementById("puddle-container");
            if (container) {
                container.remove();
            }
        }

        function applyDarkMode() {
            // Apply dark mode styling
            document.body.classList.add('dark-mode');
        }

        function removeDarkMode() {
            // Remove dark mode styling
            document.body.classList.remove('dark-mode');
        }



        // Mouse functions
        function showTab(tabId) {
            // Reset active tab button styles and hide all tab content
            document.querySelectorAll('.tab-button').forEach(button => button.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.style.display = 'none');

            // Apply active tab button style
            document.querySelector(`[onclick="showTab('${tabId}')"]`).classList.add('active');

            // Show the selected tab
            document.getElementById(tabId).style.display = 'block';

            // Apply dark mode only when Tab 3 is clicked
            if (tabId === 'tab3') {
                applyDarkMode();
                document.querySelector('.content').classList.add('dark-content');  // Make content dark
                stopPuddles();  // Stop puddles when Tab 3 is clicked
                stopRain();     // Stop rain when Tab 3 is clicked
            } else {
                removeDarkMode();
                document.querySelector('.content').classList.remove('dark-content');  // Remove dark mode from content
            }

            // Control puddles when tabs 1 or 3 are clicked
            if (tabId === 'tab2') {
                startPuddles();  // Start puddle effect for Tab 2
                stopRain();      // Stop rain when Tab 2 is active
            } else {
                stopPuddles();   // Stop puddle effect when Tab 1 or Tab 3 is active
            }

            // Control rain when tabs 2 or 3 are clicked
            if (tabId === 'tab1') {
                startRain();  // Start rain animation for Tab 1
            } else {
                stopRain();   // Stop rain for Tab 2 or Tab 3
            }
        }

        document.addEventListener('mousemove', createMouseTrail);

        function createMouseTrail(event) {
            const mouseTrail = document.createElement('div');
            mouseTrail.classList.add('mouse-trail');

            // Set a larger random size for the trail
            const size = Math.random() * 40 + 30; // Random size between 30px and 70px
            mouseTrail.style.width = `${size}px`;
            mouseTrail.style.height = `${size / 2}px`; // Make it an oval

            // Set random shades of blue
            const blueColor = `rgba(${Math.random() * 100 + 100}, ${Math.random() * 100 + 100}, 255, 0.6)`;
            mouseTrail.style.backgroundColor = blueColor;

            // Position the trail at the mouse coordinates
            mouseTrail.style.left = `${event.pageX - size / 2}px`;
            mouseTrail.style.top = `${event.pageY - size / 2}px`;

            // Append the trail to the body
            document.body.appendChild(mouseTrail);

            // Remove the trail after animation ends
            mouseTrail.addEventListener('animationend', () => {
                mouseTrail.remove();
            });
        }
        window.addEventListener("scroll", function () {
            let scrollPosition = window.scrollY;
            let button = document.getElementById("download-button");
            let flowElement = document.querySelector('.flow-slider');

            // Check if the scroll position has passed the end of the "flow-scroll" content
            if (scrollPosition + window.innerHeight >= flowElement.offsetTop + flowElement.offsetHeight) {
                // When scroll reaches the end, show the button with a smooth transition
                button.classList.add('show-btn');
            } else {
                // Hide the button if not at the end of the scroll
                button.classList.remove('show-btn');
            }
        });

        // Function to download the font file
        function downloadFont() {
            const link = document.createElement('a');
            link.href = './fonts/FlowVF.ttf';  // Make sure this path is correct
            link.download = 'FlowVF.ttf';
            link.click();
        }


        function swapLetter(newLetter) {
            var myElement = document.querySelector(".my-element");
            myElement.innerText = newLetter;
        }
        var myRoot = document.querySelector('html');


    </script>

</body>

</html>
<!-- Flow borrows visual cues from the google font Arima Sen: by  -->
<!-- JS and parts including math use or reference chatgpt - all other code self written -->